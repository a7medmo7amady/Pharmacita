@page
@model DatabaseProject.Pages.EmployeeListModel
@using DatabaseProject.Models;

@{
    ViewData["Title"] = "Employee Details";
}
<div class="container table-container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Employee Details</h2>
        <!-- Button to open the modal -->
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addEmployeeModal">
            Add New Employee
        </button>
    </div>
    <table class="table table-bordered table-hover table-striped">
        <thead class="table-primary">
            <tr>
                <th>E_ID</th>
                <th>E_Name</th>
                <th>E_Phone</th>
                <th>E_address</th>
                <th>E_salary</th>
                <th>E_role</th>
                <th>E_Age</th>
                <th>Hire Date</th>
                <th>E_department</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var employee in Model.Employeelist)
            {
                <tr>
                    <td>@employee.E_ID</td>
                    <td>@employee.E_NAME</td>
                    <td>@employee.E_Phone</td>
                    <td>@employee.E_address</td>
                    <td>@employee.E_salary</td>
                    <td>@employee.E_role</td>
                    <td>@employee.E_age</td>
                    <td>@employee.Hire_date.ToShortDateString()</td>
                    <td>@employee.E_department</td>
                    <td>
                        <a asp-page="DeleteEmployee" asp-route-id="@employee.E_ID">Delete</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<!-- Modal -->
<div class="modal fade" id="addEmployeeModal" tabindex="-1" aria-labelledby="addEmployeeModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form method="post">
                <div class="modal-header">
                    <h5 class="modal-title" id="addEmployeeModalLabel">Add New Employee</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="E_Name" class="form-label">Name</label>
                        <input type="text" class="form-control" id="E_Name" asp-for="NewEmployee.E_NAME" required>
                    </div>
                    <div class="mb-3">
                        <label for="E_Age" class="form-label">Age</label>
                        <input type="number" class="form-control" id="E_Age" asp-for="NewEmployee.E_age" required>
                    </div>
                    <div class="mb-3">
                        <label for="E_PhoneNumber" class="form-label">Phone Number</label>
                        <input type="text" class="form-control" id="E_PhoneNumber" asp-for="NewEmployee.E_Phone" required>
                    </div>
                    <div class="mb-3">
                        <label for="E_Address" class="form-label">Address</label>
                        <input type="text" class="form-control" id="E_Address" asp-for="NewEmployee.E_address" required>
                    </div>
                    <div class="mb-3">
                        <label for="E_salary" class="form-label">Salary</label>
                        <input type="number" class="form-control" id="E_salary" asp-for="NewEmployee.E_salary" required>
                    </div>
                    <div class="mb-3">
                        <label for="E_Role" class="form-label">Role</label>
                        <input type="text" class="form-control" id="E_Role" asp-for="NewEmployee.E_role" required>
                    </div>
                    <div class="mb-3">
                        <label for="E_Department" class="form-label">Department</label>
                        <select class="form-select" id="E_Department" asp-for="NewEmployee.E_department" required>
                            <option value="" disabled selected>Select Department</option>
                            <option value="Pharmacy">Pharmacy</option>
                            <option value="Lab">Lab</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="HireDate" class="form-label">Hire Date</label>
                        <input type="date" class="form-control" id="HireDate" asp-for="NewEmployee.Hire_date" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
